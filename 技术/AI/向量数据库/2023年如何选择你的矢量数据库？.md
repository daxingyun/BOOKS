# 2023年如何选择你的矢量数据库？
## 长话短说
- 如果您的堆栈中已有 PostgreSQL 或 ElasticSearch ，请使用集成向量搜索工具（分别为PGvector和knn 搜索）。当成本和/或延迟成为问题时，请考虑使用专用矢量数据库。
- 具有托管云和免费套餐的矢量数据库是启动矢量搜索项目的理想选择。
- 在我看来，Qdrant 是[数据科学家](https://www.sicara.fr/fr/parlons-data/data_scientists)的最佳选择，因为除了性能非常好之外，它还允许您使用相同的工具进行实验（将数据库保存为磁盘文件）和生产管道（正确部署的数据库）。

## 索引算法
有许多算法可以构建索引来优化向量搜索。大多数矢量数据库都实现分层可导航小世界（HNSW）和或倒排文件索引（IVF）。 这是 Pinecone的一篇精彩文章，解释了它们以及 速度、内存和质量之间的权衡。
 
	PS：扁平索引（即不进行优化）可用于保持 100% 的召回率和精度，但会牺牲速度。
## 不同载体数据库的比较
### 专用载体数据库
专用矢量数据库是仅用于矢量搜索的数据库。因此，它们被设计为针对此用例进行优化。
 
尽管各种专用向量数据库以一种似乎都在做非常不同的事情的方式呈现自己（例如 Pinecone 将自己标记为“人工智能的长期记忆”），但它们都实现了相同的目的：存储向量，为它们建立索引并使它们可搜索。

对于每个数据库，我们将关注以下几点：

- 性能

	该数据库在性能方面与其他数据库相比如何（参见 ANN 基准测试 提供了很好的比较）？
		
		PS：如果您使用大量向量（例如 >100k 向量），性能通常很重要。
- 易于本地使用

	本地使用对于促进迭代至关重要。
- 提供托管云

	如果您没有 DevOps 团队或者您想快速入门，那么部署您自己的数据库可能会很复杂。
- 提供用户界面
- 最近的筹款情况


	筹款很好地表明了数据库的吸引力和发展潜力。
- 特异性

	为了更好地理解数据库应该用于哪些用例。
 
#### Pinecone
- 性能：看起来与其他专用矢量数据库类似
- 易于本地使用：不可能，因为它不是开源的
- 提供托管云？是的，有免费套餐
- 提供用户界面？是的
- 近期融资： 2023 年 4 月 27 日 B 轮融资 1 亿
- 特异性：在主要竞争对手中，它是唯一一个非开源的数据库，因此无法进行本地迭代。

#### Qdrant
- 性能：使用 Rust 编码，性能似乎是 Qdrant 的主要目标之一。在他们的 基准测试 中，他们的速度似乎明显快于竞争对手（

		PS：此信息未得到该 ANN 基准测试的证实，该基准测试可能不使用相同的测试条件。请注意，前者比较 RPS 与精度，后者比较 RPS 与召回率。
- 易于本地使用：可以通过在本地部署数据库（使用 docker-compose）、将其保存在磁盘文件（sqlite）或内存中（不保留更改）来实现
- 提供托管云？是的，有免费套餐
- 提供用户界面？是的
- 近期筹款： 2023 年 4 月 24 日筹集 750 万种子资金
- 特异性： Qdrant 的主要优势似乎是其高性能。此外，将其用作磁盘文件或内存中的可能性可以简化许多事情，例如在 CI 中运行集成测试、在本地环境中进行原型设计和迭代。使用 DVC 来编排和版本化他们的实验的数据科学家会发现此功能特别有用，因为对于他们的每个实验，他们将能够对相应的数据库文件进行版本化。

#### Weaviate
- 性能：看起来与其他专用矢量数据库类似
- 易于本地使用：可以在本地部署数据库（使用 docker-compose）或将其保存在磁盘文件上。
- 提供托管云？是的，有免费套餐
- 提供用户界面？是的
- 近期融资： 21/04/23 5000 万 B 轮融资
- 特异性：如果您想使用 graphQL 查询数据库，那就太好了。为 Qdrant 指定的所有关于“将其用作磁盘文件的可能性”的优点也适用于 Weaviate。

#### Milvus
- 性能：看起来与其他专用矢量数据库类似
- 易于本地使用：可以在本地部署数据库（使用 docker-compose）
- 提供托管云？是的，有免费套餐
- 提供用户界面？是的
- 近期融资： 22年8月24日6000万轮B轮融资
- 特异性：矢量数据库的元老：随着时间的推移，它已被证明在许多用例中都有效。但其微服务架构复杂，管理和调试困难。

#### ChromaDB
- 性能：用完整的 Python 编码，它的性能可能不如竞争对手（免责声明：我没有尝试过，也找不到任何基准）
- 易于本地使用：可以通过在本地部署数据库（使用 docker-compose）、将其保存在磁盘文件上或内存中（更改不持久）
- 提供托管云？不
- 提供用户界面？不
- 最近筹款： 1800 万种子 06/04/23
- 特异性： Chroma DB 具有简单性：完全用 Python 编码，可以轻松针对特定用例进行定制。为 Qdrant 指定的所有关于“将其用作磁盘文件或内存中的可能性”的优点也适用于 ChromaDB。

### 通用数据库
#### PGVector ( PostgreSQL ) / knn 搜索 ( ElasticSearch )
通用数据库最初并不是为矢量搜索而设计的，因此不如专用矢量数据库高效。

然而，如上所述，如果您使用少量向量（例如 <100k）并且已经在使用这些数据库之一（很可能，因为根据 stackoverflow 2023 年调查，49% 的专业开发人员使用 PostgreSQL），务实的选择肯定是坚持下去，让你的技术栈保持简单。当成本和/或延迟成为问题时，请考虑使用专用矢量数据库。
  
感谢您的宝贵时间，如有任何矢量数据库相关项目，[请随时与我们联系](https://www.sicara.fr/en/contact)！ 虽然这些数据库目前主要用于生成式 AI用例，但它们在其他各个领域也非常有用：例如，在[计算机视觉](https://www.sicara.fr/computer-vision)中，在少量学习项目中[托管您的支持集](https://www.sicara.fr/blog-technique/your-few-shot-model-15mn-pytorch)！


## 参考
[how-to-choose-your-vector-database-in-2023](https://www.sicara.fr/blog-technique/how-to-choose-your-vector-database-in-2023)