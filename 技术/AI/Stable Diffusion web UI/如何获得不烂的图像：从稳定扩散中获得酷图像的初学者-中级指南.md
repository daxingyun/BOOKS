# 如何获得不烂的图像：从稳定扩散中获得酷图像的初学者/中级指南
## 从 Stable Diffusion 中获取酷图像的初学者/中级指南
[https://imgur.com/a/asWNdo0](https://imgur.com/a/asWNdo0)

（颜色的标题图像。imgur 标题中的提示和设置。）

## 介绍
所以你已经开始潜水并[安装了stable-diffusion](https://github.com/AUTOMATIC1111/stable-diffusion-webui)。但这不太像 Dalle2。到处都是滑块，不同的diffusers，种子......足以让任何人头晕目眩。但不要担心。一旦您对它们感到满意，这些设置将为您提供更好的体验。在本指南中，我将讨论如何使用 Stable Diffusion 生成 text2image 图稿。我将介绍基本的提示理论，不同的设置有什么作用，以及在什么情况下你可能想要调整设置。

 
	免责声明：最终我们都是这方面的初学者，包括我在内。如果我说的任何内容听起来与您的经历完全不同，请发表评论并举例说明！让我们在评论中分享信息并共同学习！

注意：如果阅读这篇长文的想法让您感到头痛，只需使用以下设置：

- CFG（分类器免费指导）：8
- 采样步骤：50
- 采样方法：k_lms
- 随机种子

这些设置完全适用于各种提示。这至少会让你玩得开心。保存这篇文章并在您准备好后返回本指南。

## 提示
提示很容易成为它自己的帖子（如果您喜欢这篇文章并希望我继续努力，请告诉我）。但我可以在这里回顾一些好的做法和广泛的刷题内容。

拥有包含提示和设置（如 [https://lexica.art/](https://lexica.art/)）的 AI 图像存储库的站点是您的上帝。在此处翻阅并寻找与您想要的相似的东西。或者只是让自己受到启发。记下提示中使用的生成好图像的短语。随意偷窃\混音\逐字窃取他们的提示，然后取出一个艺术家。

怎么了？玩得开心。最终，在 Stable Diffusion 中创建图像的过程是自我驱动的。我不能告诉你该怎么做。

您可以一次向提示中添加任意数量的内容。不要觉得有必要一次添加一个短语来查看模型的反应。该模型喜欢震惊和敬畏。通常，提示越长越详细，结果就越好。花点时间说具体点。我的理论是人们不会浪费时间详细描述他们不喜欢的图像。人工智能经过奇怪的直觉训练，可以看到“哇这个人对这件作品有很多话要说！”作为“质量形象”。所以要大胆和描述性。请记住，每个提示都有一个 token 限制（我相信）75。给自己一个 GUI，告诉你什么时候达到这个限制，或者你可能会把头撞到你的桌子上：一些 GUI 很乐意让你添加尽可能多地提示您，同时默默地截断结尾。哎呀。

如果您的图像在 `k_euler_a`，第 15 步，CFG 8（稍后我将深入解释这些设置）处看起来很糟糕（或与您想象的相差甚远），那么弄乱其他设置不会对您有太大帮助.根据提示返回绘图板。在即时工程的早期阶段，您主要关注情绪、构图（主题在场景中的布局方式）和颜色。你的吐痰，基本上。如果它看起来很糟糕，添加或删除单词和短语，直到它看起来不再糟糕为止。尝试调试出了什么问题。查看图像并尝试了解 AI 做出选择的原因。你的提示总是有一个原因（尽管有时这个原因可能完全难以理解）。

请允许我快速搁置在提示中使用艺术家姓名：使用它们。他们有很大的不同。研究艺术家的技巧也会产生很好的提示语。了解粉丝和艺术评论家对艺术家的评价。他们如何描述他们的工作？

请记住标记化：

	scary swamp, dark, terrifying, greg rutkowski
此提示是对提示进行标记的一种可能方式的示例。看看我是如何用逗号将描述与情绪和艺术家分开的？你可以这样做，但你不必这样做。 “moody greg rutkowski piece” 而不是 “greg rutkowski” 也很酷且有效或 “character concept art by greg rutkowski”。这些类型的变化会对您的后代产生巨大影响。要有创意。

请记住顺序问题。提示符前面的内容比提示符后面的内容权重更大。如果我有上面的提示并决定我想获得更多的 greg 影响力，我可以重新排序：

	greg rutkowski, dark, scary swamp, terrifying
本质上，提示的每一块都是一个滑块，您可以通过在提示中物理移动它来移动它。如果你的脸不够详细？在前面添加诸如“高度详细的对称面 highly-detailed symmetric faces ”之类的东西。你的作品有点太黑了？将提示中的“黑暗”移到最后。 AI也讲究重点！如果您的提示中有对您很重要的内容，请烦人地重复。就像我在想象一个怪异的片段并认为上述提示的结果还不够可怕，我可能会将其更改为：

	greg rutkowski, dark, surreal scary swamp, terrifying, horror, poorly lit
想象一下，您正在尝试制作独角兽的玻璃雕塑。您可以添加“glass, slightly transparent, made of glass”。同样重复的想法也适用于质量。这就是为什么您会看到许多类似的提示：

	greg rutkowski, highly detailed, dark, surreal scary swamp, terrifying, horror, poorly lit, trending on artstation, incredible composition, masterpiece

请记住，将“质量条款”放在提示的前面会使人工智能首先关注质量，因为订单很重要。成为你提示的粉丝。当你输入你的提示时，就像你很兴奋一样。使用您在现实生活中使用的自然语言或自命不凡的废话。两者都是有效的。取决于您要查找的图像类型。真正尝试描述你的心灵之眼，不要遗漏情绪词。

PS：在我的实验中，大小写无关紧要。括号和括号无关紧要。感叹号之所以起作用，只是因为 AI 认为你真的对那个特定的词感到厌烦。通常，像人类一样编写提示。人工智能接受了人类如何谈论艺术的训练。

最终，提示是一种技能。这需要实践、艺术眼光和诗意的心。你应该谈论想法、隐喻、情感和能量。你的提示能力不是别人可以从你身上窃取的。因此，如果您分享图像，请分享您的提示和设置。每个提示都是一支独特的笔。但它是一支笔，可以通过超创意的人工智能和人类的集体智慧无限混合。我们越多地合作生成酷提示并查看效果如何，我们所有人都会变得更好。这就是我写这篇文章的原因。我可以像一个咯咯笑的妖精一样坐在地下室囤积我的知识，但我希望每个人都做得更好。

## 分类器免费指导 (CFG)
可能是  Stable Diffusion 中最酷的单数术语。 CFG 衡量 AI 会听你的提示与做自己的事情的程度。实际上，它是衡量您对提示的信心程度的衡量标准。这是一个 CFG 值直觉检查：
 
- CFG 2 - 6：让 AI 掌舵。
- CFG 7 - 11：让我们合作吧，人工智能！
- CFG 12 - 15：不，说真的，这是一个很好的提示。照我说的做，AI。
- CFG 16 - 20：照我说的做，AI。

所有这些都是有效的选择。这仅取决于您在流程中所处的位置。我建议大多数人主要坚持 CFG 7-11 范围，除非你真的觉得你的提示很棒并且 AI 忽略了它的重要元素（尽管它可能只是不理解）。如果你让我谈谈我的肥皂盒，我相信我们正在进入人工智能历史的一个阶段，在这个阶段，人机合作将成为我们获得最佳结果的地方，而不是单独使用人工智能或单独使用人类。 CFG 7-11 系列代表了这种合作。

你越觉得你的提示很糟糕，你就越想尝试 CFG 2-6。对人工智能向您展示的内容持开放态度。有时你可能会说“嗯，实际上这是一个有趣的想法”。相应地修改你的提示。在这个级别，即使是最糟糕的提示，人工智能也可以运行。归根结底，人工智能是一个极富创造力的实体，它吸收了互联网上大多数人类艺术。它对艺术略知一二。所以相信它。

强大的提示可以在 CFG 15-20 中存活。但就像我上面说的，CFG 15-20 是你在对 AI 大喊大叫。有时 AI 会发脾气（很少有人喜欢被大喊大叫）并说“闭嘴，你的提示很糟糕。我不能用这个！”过去 CFG 15。如果您的结果在 CFG 15 上看起来很糟糕，但您仍然认为自己的提示非常好，您可能想尝试 CFG 12。 CFG 12 是同一想法的更柔和、更具协作性的版本。

关于 CFG 的另一件事。 CFG 将改变 AI 对您的提示的反应程度。看起来很明显，但有时如果您在 CFG 7 中对复杂提示进行更改，您会在 CFG 12-15 中看到更显着的更改。如果你喜欢你所看到的，这不是不留在 CFG 7 的理由，只是要记住一些事情。

## 采样方法/采样步骤/批次计数
这些是紧密相连的，所以我将它们捆绑在一起。采样步骤和采样方法是一种技术性的，所以我不会深入探讨这些实际上在做什么。我将主要坚持它们如何影响你训练的世代。这些也经常被误解，我们对这个领域“最好”的理解非常不稳定。因此，对这一部分持保留态度。我只会给你一些好的做法来开始。我也不打算谈论每个采样器。只有我熟悉的那些。

- k_lms：老可靠

	如果您的提示很好，则 `k_lms` 在 50 步时将在大多数情况下为您提供良好的世代。 k_lms 运行得非常快，所以结果也会很快出现。你可以很容易地在 CFG 7-8 上永远坚持这个设置并且没问题。如果事情看起来有点被诅咒，你可以尝试更高的步值，比如 80。但是，根据经验，确保你的更高的步值实际上让你受益，而你不仅仅是在浪费你的时间。您可以通过保持种子和其他设置稳定并上下改变步数来检查这一点。您可能会对低步数的作用感到震惊。我非常怀疑那些说他们每一代人都是 150 步的人。
- DDIM：速度恶魔

	DDIM 8 步（是的，你没看错。8 步）可以以极快的速度为您带来出色的结果。这是快速生成大量图像的绝佳设置。当我在测试新的提示想法时，我会将 DDIM 设置为 8 步并生成一批 4-9 张图像。这为您提供了一个奇妙的鸟瞰图，了解您的提示在多个种子中的作用。这是快速快速修改的绝佳设置。您可以在 DDIM:8 的提示中添加一个单词，然后在不到 5 秒的时间内查看它如何影响您的种子输出（取决于显卡）。对于更复杂的提示，DDIM 可能需要更多帮助。如果您的输出仍然看起来乱码（或者提示是问题？？），请随意提高到 15、25 甚至 35。你最终会发现增加步数会有所帮助。但是，与上述相同的规则适用。不要浪费自己的时间。每隔一段时间确保您需要所有这些步骤。
- k_euler_a：变色龙

	适用于 DDIM 的所有内容也适用于此处。这个采样器也非常快，并且在极低的步数（步骤 8-16）下也能获得很好的结果。但它也更多地改变了一代的风格。您在步数 15 时的生成可能看起来与步数 16 大不相同。然后它们看起来都与步数 30 大不相同。然后这可能与步数 65 大不相同。这个采样器很狂野。总的来说，这里也值得注意：根据您使用的采样器，您的结果看起来会完全不同。所以不要害怕尝试。如果您在 k_euler_a 中有一个您已经非常喜欢的结果，请将其弹出到 DDIM（反之亦然）。
- k_dpm_2_a：饥饿的艺术家

	在我看来，这个采样器可能是最好的，但它有严重的权衡。与我上面提到的相比，它非常慢。但是，对于我的钱来说，30-80 步范围内的 k_dpm_2_a 非常非常好。对于实验来说，这是一个糟糕的采样器，但如果你已经有一个你喜欢的提示，那就让它裂开吧。只是准备等待。等等。但是，如果您仍处于从提示中添加和删除术语的阶段，您应该坚持使用 k_euler_a 或 DDIM 以减少步数。

我目前正在研究一种理论，即某些采样器更擅长某些类型的艺术品。一些更擅长肖像、风景等。我还没有任何具体的想法可以分享，但是如果你觉得你有一个很好的提示，那么根据我上面所说的调整你的采样器是值得的，但是你的结果看起来一反常态的坏。

关于大步长的注意事项：许多可以通过更高的步数解决的问题也可以通过更好的提示来解决。如果您的拍摄对象的眼睛非常突出，请尝试在您的提示中添加一些内容，谈论他们的“对称的高度细致的眼睛、奇妙的眼睛、复杂的眼睛”等。不过，这不是灵丹妙药。眼睛、脸和手是难以提示的重要事物。不要气馁。继续试验，不要害怕从提示中删除内容。没有什么是神圣的。您可能会对您可以省略的内容感到震惊。例如，我看到很多人在令人惊叹的肖像提示中添加了“有吸引力”……但 AI 绘制的图像中的大多数人已经很有吸引力了。根据我的经验，大多数时候根本不需要“有吸引力”。 （无论如何，吸引力是非常主观的。尝试“独特的鼻子”或其他东西。这通常会使脸很酷。做很酷的模型。）

 关于大批量的注意事项：有些人喜欢制作 500 代并选择最好的 4 代。我认为在这种情况下，您最好多修改提示。我见过的最可靠的提示

# 种子
我们把最好的留到最后了吗？可以说。如果您正在寻找一个独特的好图像与您的朋友分享或在 reddit 上收获业力，那么寻找一个好种子是非常重要的。一个好的种子可以在各种提示、采样器和 CFG 中强制执行诸如构图和颜色之类的东西。使用 DDIM:8-16 在您的提示下进行种子搜索。但是，如果您主要是在寻找一个有趣的提示，并且能获得始终如一的好结果，那么种子就不那么重要了。在这种情况下，您希望您的提示在种子中具有适应性，并且将其过度拟合到一个种子有时会导致它在其他种子上看起来更糟。权衡取舍。

实际的种子整数并不重要。它或多或少只是初始化一个定义扩散起点的随机数生成器。也许有一天我们会有很酷的种子画廊，但那一天不是今天。

种子是用于 A/B 测试提示的绝佳工具。锁定你的种子（选择一个随机数，选择一个你已经喜欢的种子，无论如何）并在你的提示中添加一个细节或艺术家。运行。输出如何变化？重复。这对于添加和删除艺术家来说非常酷。作为读者练习，尝试在同一种子上运行“Oasis by HR Giger”，然后运行“Oasis by beeple”。看到它发生了很大变化，但有些元素仍然相似吗？现在试试“Oasis by HR Giger and beeple”。它结合了两者，但组成仍然相当稳定。这就是种子的力量。

或者说你有一个很好的提示，可以输出一个“brunette 黑发”女人的肖像照。你运行这个几次，找到你喜欢的一代。抓住那一代人的种子以保持稳定，并将提示改为“金发 blonde ”女人。该女性将处于相同或非常相似的姿势，但现在有一头金发。您可能会看到这是多么强大和容易。注意：较高的 CFG (12-15) 有时可以帮助进行此类测试，以便 AI 真正听取您的提示更改。

## 结论
谢谢你坚持我，如果你做到了这一步。在过去的几个月里，我通过大量实验和窃取其他人的想法来收集这些信息，但是，就像我在介绍中所说的那样，这项技术是如此的新奇，我们对有效方法的想法也在不断变化。我敢肯定，几个月后我会回顾其中的一些，然后说“我到底在想什么？？”另外，我相信几个月后工具也会变得更好。如果您不同意我的观点，请插话并纠正我。我远非万无一失。如果我错了，我什至会编辑这篇文章并感谢你！

如果您有任何问题，您想要研讨会的提示，无论如何，请随时在评论中发布或直接给我发信息，我会看看我是否可以提供帮助。这是一个巨大的主题领域。显然，我什至没有触及 image2image、gfpgan、esrgan 等。这是一个狂野的世界！如果您希望我在以后的帖子中谈论任何主题，请在评论中告诉我。

我对这项技术感到非常兴奋！这非常有趣！让我们一起玩得开心！

[https://imgur.com/a/otjhIu0](https://imgur.com/a/otjhIu0)

（颜色的页脚图像。imgur 标题中的提示和设置。）

## 参考
[How to get images that don't suck: a Beginner/Intermediate Guide to Getting Cool Images from Stable Diffusion](https://www.reddit.com/r/StableDiffusion/comments/x41n87/how_to_get_images_that_dont_suck_a/)