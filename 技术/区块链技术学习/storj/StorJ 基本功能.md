# StorJ 基本功能
## 客户端功能
- 基础功能
	- 文件切分和还原
		- 切片
		- 加密
			- AES-GCM
			- Salsa20 和 Poly1305 组合
			- 可插拔？
		- 加密数据
			- 文件数据加密
			- 客户路径加密
			- 扩展属性加密  
		- 分条带切片(EC 操作数据边界)
		- EC 段
		- 片段
	- 加解密路径信息、扩展信息方法 
	- 密钥管理
		- 生成派生密钥(分层密钥)
			- BIP32
		- 派生加密密钥(加密文件密钥)
		- 随机生成文件加密密钥
		- 证书生成
- 对卫星		  
	- 卫星节点发现机制
		- DHT？
	- 卫星节点验证机制
		- DHT+证书签名
	- 签发消费信息
		- 存储消费
		- 带宽消费
	- 账户管理 ？
		- 注册
		- 充值
		- 登陆
	- 汇报结果
		- 汇报对存储节点
	- 查询加密元数据       
- 对存储节点
	- 使用卫星签署带宽和提供的存储节点信息对存储节点进行并发操作
		- 上传
		- 下载
		- 删除  
		  	 
## 卫星功能
- 基础功能
	- 存储节点发现机制
		- DHT发现
		- 缓存发现
	- 节点审查机制
		- 新节点加入审查机制
		- 常规节点检查机制
		- 异常节点过滤机制
	- 存储节点信誉机制
	- 存储节点工作证明机制     
- 对客户端功能
	- 账户系统 
		- 注册？
		- 查询？
		- 登陆？
		- 注销？
	- 计费系统
		- 充值
			- 数字货币
			- 发币
		- 动态汇率
			- 根据汇率转换 storj
		- 计量
		- 扣费
		- 资金维护 
	- 数据管理系统    
		- 元数据存储
			- 桶 ID(每个用户一个？)
			- 片段 ID
			- 加密模型
			- EC 参数
			- 加密密钥
			- 片段 HASH
			- 用户签名
			- 其他源数据？
			- 最后一个片段包含整个文件分片的元数据
				- 文件分片包含多少、大小
				- 第一段随机数
				- 扩展数据(自定义参数)
				- 加密路径
				- 其他整文件分片元数据
		- 元数据变更
			- 路径
				- 创建
				- 查询
				- 删除
			- 数据
				- 创建
				- 查询
				- 删除      
		- 权限系统(对元数据操作)
			- 检查
			- 授权
		- 偏好系统(对存储节点)
			- 筛选节点
		- 授权系统(存储节点操作)
			- 下载带宽
			- 删除         
- 对存储节点功能	 
	- 数据恢复机制
		- 节点审查
		- 数据恢复
	- 垃圾回收查询机制 
	- 费用支付机制
		- 汇聚时间内消耗资源
			- 存储资源
			- 带宽资源
		- 资源类型
			- 用户使用
			- 节点审查
			- 数据恢复
			 
## 存储节点功能
- 基础功能
	- 通过 DHT 验证签名？
- 对客户端 
	- get
		- 按照卫星签署带宽分配，分配对应带宽
		- 验证客户端访问
	- put
		- 按照卫星签署带宽分配，分配对应带宽
		- 设置数据 TTL
		- 格式化(卫星 ID、片段 ID)存储数据片段 
	- del 
- 对卫星
	- 定期请求 GC 数据
	- 客户端操作完毕后，使用客户端发送的卫星签名证书向卫星确认操作
	- 定期使用记录客户端发送的卫星签名证书向卫星对账
	- 卫星信誉系统
	- 拒绝异常卫星
		- 存储数据
		- 清除异常卫星数据？
	- 响应给卫星审查数据
	- 接收卫星修复数据
	 
## 区块链功能
太坊代币体系 [ERC20] 方案，可以允许卫星对存储节点进行奖励，而客户端充值卫星系统完全独立于该方案之外

## 问题
- 卫星节点是否有偏好系统
- 卫星节点是否有缓存
- 卫星和客户端之间的注册如何进行
