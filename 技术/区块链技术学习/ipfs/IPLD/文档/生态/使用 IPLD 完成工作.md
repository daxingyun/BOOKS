# 使用 IPLD 完成工作
在 IPLD 中有很多方法可以完成任务。

当设计一个新系统并试图决定您应该使用 IPLD 的哪些部分来实现您的目标时，请尝试沿着这个图表向下看——按顺序：如果您可以用这个文件顶部的东西完成某件事，那么就去做；如果你做不到，那么你应该继续阅读列表，找到可用的更具侵入性和高强度的选项。

- 使用数据模型。
- 使用模式。
- 使用 ADL。
- 编写一个新的编解码器。

## 使用数据模型
仅使用 [数据模型](https://ipld.io/glossary/#data-model) 和核心 API，您就可以完成很多工作。

每当您想使用 IPLD 完成某件事时，我们建议您首先使用数据模型勾勒出您想做的事情。这类似于说 “只是在 JSON 中勾勒出你想要的 API 的例子”；也许你以后会想要更正式的结构，也许你会想要编写更多的自动验证规则等；但那些可以晚点来。
## 使用模式
模式适用于您想要形式化结构的情况。它们可用于文档；他们对数据结构进行验证，因此您知道自己在处理什么；它们可用于版本检测和功能检测；对于某些库，它们甚至可以用于代码生成。

我们发现使用 Schemas 通常是个好主意。但你不必！如果你想做的事情很容易在数据模型级别完成，那就去做吧。

模式与处理数据的数据模型方法完全兼容。他们只是在上面装饰了更多的行为。为遍历常规数据模型指定接口而编写的任何代码也将能够遍历使用模式处理过的数据。

模式可用于对数据进行一些非常基本的转换,比如

	将数据中字段的长格式名称转换为较短的名称，然后再将它们传入或传出序列化
但这就是它们的能力范围；他们不能做比这更动态的重组。
## 使用 ADL
ADLs——高级数据布局——适用于当你想像 IPLD 数据模型一样呈现数据时（以便我们所有其他工具都可以处理它），但数据的序列化结构显着（拓扑）不同的。

人们希望在生态系统中做的事情已经作为 ADL 完成的示例包括：

- 大型集合，跨多个块分片，但仍显示为单个地图或列表
- 大字节，跨多个块分片，但仍呈现为一个连贯的字节对象
- 加密数据，其中有密文格式，也有（有条件地）明文格式

ADL 是一个抽象层，可以在其中实现像上面列出的那些非常强大的转换......同时仍然重用现有的序列化编解码器，同时仍然将事物呈现为数据模型接口，以便所有相同的遍历逻辑都适用于普通数据模型或在模式处理的数据上也仍然适用于 ADL 处理的数据。

ADL 也值得注意（如模式），人们总是可以选择在没有它们的情况下处理数据，并且直接处理原始数据模型内容。通常这会不太有用......但它可以是一个很好的调试工具，并且对于可理解和可重用的数据结构设计很有用。
## 编写新的编解码器
这应该是您绝对不得已的手段。

编写新的编解码器会带来未来的可移植性问题。每种编程语言的每个 IPLD 库都需要实现它；实际上，很多人不会——除非你给他们一个很好的理由。因此，最好坚持使用一种已经得到广泛支持的编解码器。

也应该没有什么理由需要为它创建一个新的有线格式和一个新的编解码器。IPLD 模式及其用于自定义表示的机制已经可以在无模式（冗余但易于阅读）和需要模式（密集，但没有模式就无法理解）数据之间的梯度上选择您喜欢的任何位置......并且大多数新的序列化格式的发明是因为有人想在该梯度上放样一个新位置。现在，你不应该这样做。

引入新编解码器的最典型原因是将 IPLD 系统与其他一些现有的序列化格式连接起来。太好了，我们欢迎（并且绝对是为这种桥接而设计的）。但是，如果您从一开始就设计一个 IPLD 的新系统，我们真的建议您使用现有的编解码器。它只是更容易开始运行，并且尝试通过新的编解码器打造自己的方式没有什么价值和大量成本。

## 但为什么？
为什么会有这么多不同的层次？

因为要使标准有用并允许人们一起构建可重用系统的生态系统，他们必须在某些事情上统一；为了使标准足够灵活以允许人们构建适合他们和他们的特定任务的东西，它们必须是可扩展的。

我们在每一层中都有不同程度的统一与灵活性。这意味着您可以选择要与生态系统的其余部分保持多近的轨道。