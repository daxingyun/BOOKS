# 识别和检索网络上的数据 1
## 我们如何识别和检索数据
中心化网络和去中心化网络之间最重要的区别之一是我们识别和检索数据的方式。我们用一个简单的例子来说明：

你的两个朋友，拉尔斯和考特尼，向你爱猫的孩子推荐了同一本书，但他们以截然不同的方式向你描述了这本书：

- Lars：“去纽约市百老汇 828 号的斯特兰德书店，乘电梯到二楼，在儿童区找到右边第三个书柜，拿到顶层书架左边 16 英寸的书。 “
- Courtney：“看看 Anna Claybourne 最可爱的小猫。它的 ISBN-13 编号是 9781682972168。”

如果您的目标是获得这本书的副本，您认为以下哪些描述符最有帮助？哪一个为您提供了获取图书的最多选择？在每种情况下，一旦您按照说明进行操作，您对找到朋友想要的书的信心有多大？

## 位置寻址和内容寻址
您的一位朋友通过位置识别了这本书，另一位朋友通过内容识别了这本书。（不确定哪个是哪个？提示：我们喜欢头韵几乎就像 Lars 喜欢位置寻址和 Courtney 喜欢内容寻址一样。）

位置寻址将我们指向特定实体存储数据的位置。Lars 向我们指出了一个由 Strand 控制的特定书架，他知道他们以前曾把这本书放在那里，并希望他们继续在那里提供。这就是我们在集中式网络上识别数据的方式。

相反，内容寻址为数据提供了一个唯一的、源自内容的标识符，我们可以使用它从各种来源检索数据。我们本可以使用 Courtney 提供的 ISBN 来验证我们是否在当地图书馆、邻居家或学校书展上找到了正确的书。这就是我们在去中心化网络上识别数据的方式。

让我们更深入地了解这两个模型。
# 集中式网络：基于位置的寻址 2
让我们首先检查一下我们传统上用于访问数据的模型。
## 使用 URL 的位置寻址
URL（统一资源定位符）是我们在集中式网络（你知道的，我们都习惯的普通旧网络）上为数据相互提供的主要地址。它们使我们能够在 Web 上创建链接和连接数据，因此它们具有重要的用途。（如果没有链接，网络会很糟糕！）但是，URL 是基于数据存储的位置，而不是存储在那里的资源的内容。我们称这个位置寻址，它给我们带来了一些问题。

我们大多数人对 URL 都有很多经验，我们会根据我们的经验对它们做出一些假设。例如，当我们看到 `https://www.puppies.com/beagle.jpg` 时 ，我们可能会根据文件名和扩展名猜测该位置存储的数据是比格犬的图像（JPEG 格式），但我们无法仅从 URL 来验证这一点。很可能会有一张吉娃娃藏在 `beagle.jpg` ，甚至更糟的是，一只可爱的小猫的照片！

通过域名，URL 指示我们应该去哪个权威机构获取数据。尽管网络在某种意义上已经是去中心化的（因为任何人都可以链接到其他任何人），但引用数据的链接是基于位置的，因此数据本身必须集中在一个权威机构上，以便我们找到它。我们对这些权限（或域）进行假设，就像我们对文件名所做的那样。例如，我们可能假设打开托管在  `puppies.com`  的文件比托管在 `evilhacker.com` 的文件更安全，但我们不能确定这一点。

归根结底，托管在集中式网络上的文件内容与其基于位置的地址没有直接关系。如果我们看到一张可爱的小狗的照片，并被告知它存储在网络上，我们就无法猜测将我们引向该图像的 URL。我们既不能确定域名，也不能确定文件名，它告诉我们谁在托管它。
## 集中网络上的信任和效率
由于我们无法验证特定 URL 中的内容并且依赖于中央机构（和人类善意）来标记事物的真实情况，因此我们很容易被恶意行为者欺骗。

42,000 人也很容易存储那只可爱的小猎犬的完全相同的照片，但所有照片都在不同的域和不同的文件名中，从而导致大量冗余。让我们面对现实吧，即使在我们自己的笔记本电脑上，我们中的大多数人也曾不小心保存了相同的文档，但没有意识到， `download.pdf`  或者 `download(01).pdf` 一遍又一遍地保存同一篇论文的迭代，并 `v1 `添加 `2018-12-18` 了标题。Web 是一堆混乱的数据，这些数据在不同的 URL 中保存了多次，并且没有简单的方法来判断哪些项目彼此相同。

# 去中心化网络：内容寻址 3
正如我们所见，集中式网络依赖可信赖的权威机构来托管我们的数据，并使用基于位置的 URL 来访问它。但还有另一种选择。在去中心化网络上，我们都可以托管彼此的数据，使用更安全的不同类型的链接，让我们更容易信任我们的邻居。
## 加密散列
[加密散列](https://en.wikipedia.org/wiki/Cryptographic_hash_function)是去中心化数据结构工具箱中最重要的工具。它为一种新的链接形式打开了大门，称为内容寻址，将我们从对中央当局的依赖中解放出来。

散列法获取任何大小和类型的数据并返回给您一个表示它的固定大小的“散列”。散列是一串看起来像官方文章的字符，但您可以将其视为数据的唯一名称。它可能看起来像这样：

	bafybeigdyrzt5sfp7udm7hu76uh7y26nf3efuylqabf3oclgtqy55fbzdi
老实说，这些名称目前对人类不是很友好（`beagle.jpg` 更具描述性！），但它们更安全。原因如下：

加密哈希值可以从数据本身的内容中导出，这意味着任何对相同数据使用相同算法的人都将得到相同的哈希值。如果 `Ada` 和 `Grace` 都使用相同的去中心化网络协议（例如 IPFS）来共享完全相同的小猫照片，则两张图像将具有完全相同的哈希值。通过比较这些哈希值并确认它们相同，我们可以保证这两张照片的每个像素都是相同的。

加密散列是唯一的。如果 Grace 使用 `Photoshop` 去除那只小猫的一根胡须，更新后的图像将有一个新的哈希值。只需查看该哈希值，即使无法访问文件本身，也很容易看出该文件现在包含不同的数据。
## 信任去中心化网络
在集中式网络上，我们学会了信任某些权威机构而不是其他权威机构。我们尽最大努力利用我们从 URL 中获得的线索，但也有一些恶意行为者利用位置寻址的缺点来欺骗我们。

然而，在去中心化的网络上，我们都投入并托管彼此的数据，内容寻址使我们能够信任共享的信息。我们可能不太了解托管数据的对等点，但哈希可以防止恶意行为者在文件内容方面欺骗我们。这就是加密散列对去中心化网络如此重要的原因。
## 向同行询问内容
使用传统的位置寻址，我们知道我们需要访问域 `puppies.com` 才能找到存储为 `beagle.jpg`. 如果 `puppies.com` 域由于某种原因被破坏，我们将无法访问该图像。

去中心化网络的工作方式不同。当我们想要一张可爱宠物的特定照片时，我们会通过其内容地址（哈希）来请求它。我们问谁？全网通！如果 Ada 在线，我们将看到她有我们正在寻找的内容，并且我们将知道它正是我们需要的文件，因为它具有匹配的哈希值。如果她下线了，我们可能仍然能够从 Grace 或其他同行那里得到相同的照片。

由于我们使用散列在去中心化网络上请求数据，我们可以将散列视为一个链接，而不仅仅是一个名称。

# 加密哈希和内容标识符 (CID) 4
到目前为止，我们只是为了大家的欢乐而讨论可爱的图像，但是内容寻址可以用于所有不同类型的文件和数据，从 JSON 对象到学期论文再到视频。为了使加密散列起作用，我们需要知道我们正在使用的数据格式并使用适当的工具。
## 解码数据结构
[ACID (Content Identifier) ](https://docs.ipfs.io/concepts/content-addressing/)是分散式网络上使用的一种特殊形式的内容寻址。它是为 [IPFS](https://ipfs.io/)（我们将在后面的教程中讨论的去中心化网络协议）开发的，但具有非常广泛的影响。

A 是包含 `加密哈希` 和 `编解码器` CID 的单个标识符，编解码器包含有关如何解释该数据的信息。编解码器以特定格式编码和解码数据。

	+-------+------------------------------+
	| Codec | Multihash                    |
	+-------+------------------------------+
许多格式和协议已经使用内容寻址。Git 之类的工具以及以太坊和比特币之类的协议都在其中，但它们在如何解释数据以及它们用于散列的加密函数方面有所不同。CID 允许我们为这些系统中的任何一个创建一个通用标识符。

每个 CID 都是一个标识符，其中包含 [codec](https://github.com/multiformats/multicodec) 用于解释数据的标识符和一个 [multihash](https://github.com/multiformats/multihash) 自描述散列（告诉您使用哪种散列函数创建它的散列）。

	+------------------------------+
	| Codec                        |
	+------------------------------+
	|                              |
	| Multihash                    |
	| +----------+---------------+ |
	| |Hash Type | Hash Value    | |
	| +----------+---------------+ |
	|                              |
	+------------------------------+
有关如何在 IPFS 中构建 CID 的更多详细信息，请查看我们的 [CID 教程剖析](https://proto.school/anatomy-of-a-cid)。
# 将数据链接在一起 5
网络（无论是集中式还是分散式）最重要的特征之一就是链接。每天在集中式网络上，我们都从文本链接到图像，从徽标链接到主页，从电子邮件链接到 PDF。链接将资源联系在一起，传达意义，并使网络具有极强的交互性！

在本教程中，我们探索了如何将特定数据的加密哈希用作链接，以从去中心化网络上的对等点检索该数据。然而，我们可以更进一步，使用 CID 来表达数据结构，传达各种数据之间关系的含义。

在我们的 [Merkle DAG](https://proto.school/merkle-dags) 教程中，您将了解内容寻址数据结构如何使我们能够构建交织数据网络


